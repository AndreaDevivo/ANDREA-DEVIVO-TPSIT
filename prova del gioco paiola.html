<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pong</title>
    <style>
        body {
            background-color: black;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            overflow: hidden;
        }
        canvas {
            border: 2px solid white;
        }
    </style>
</head>
<body>
    <canvas id="pongCanvas" width="800" height="400"></canvas>

    <script>
        const canvas = document.getElementById('pongCanvas');
        const ctx = canvas.getContext('2d');

        // Impostazioni del gioco
        const paddleWidth = 10, paddleHeight = 80;
        const ballSize = 10;
        let playerY = (canvas.height - paddleHeight) / 2;
        let computerY = (canvas.height - paddleHeight) / 2;
        let ballX = canvas.width / 2;
        let ballY = canvas.height / 2;
        let ballSpeedX = 6; // Aumentato per velocizzare la pallina
        let ballSpeedY = 6; // Aumentato per velocizzare la pallina
        let playerSpeed = 0;
        let computerSpeed = 6; // Aumentato per far muovere più velocemente il paddle del computer
        let playerScore = 0;
        let computerScore = 0;

        let timeElapsed = 0; // Tempo trascorso per aumentare gradualmente la velocità della pallina
        const speedIncreaseInterval = 5000; // Tempo in millisecondi tra ogni incremento della velocità
        const speedMultiplier = 1.05; // Moltiplicatore di velocità ogni incremento

        // Disegna il paddle
        function drawPaddle(x, y) {
            ctx.fillStyle = 'white';
            ctx.fillRect(x, y, paddleWidth, paddleHeight);
        }

        // Disegna la pallina
        function drawBall(x, y) {
            ctx.fillStyle = 'white';
            ctx.beginPath();
            ctx.arc(x, y, ballSize, 0, Math.PI * 2);
            ctx.fill();
        }

        // Disegna il punteggio
        function drawScore() {
            ctx.fillStyle = 'white';
            ctx.font = '30px Arial';
            ctx.fillText(playerScore, canvas.width / 4, 30);
            ctx.fillText(computerScore, 3 * canvas.width / 4, 30);
        }

        // Gestisci il movimento del paddle del giocatore
        document.addEventListener('keydown', function (e) {
            if (e.key === 'ArrowUp') {
                playerSpeed = -8;
            } else if (e.key === 'ArrowDown') {
                playerSpeed = 8;
            }
        });
        document.addEventListener('keyup', function () {
            playerSpeed = 0;
        });

        // Movimento del gioco
        function move() {
            // Muovi la pallina
            ballX += ballSpeedX;
            ballY += ballSpeedY;

            // Muovi il paddle del giocatore
            playerY += playerSpeed;

            // Muovi il paddle del computer
            if (computerY + paddleHeight / 2 < ballY) {
                computerY += computerSpeed;
            } else {
                computerY -= computerSpeed;
            }

            // Gestisci il rimbalzo della pallina sulle pareti
            if (ballY + ballSize > canvas.height || ballY - ballSize < 0) {
                ballSpeedY = -ballSpeedY;
            }

            // Rimbalzo della pallina sui paddles
            if (ballX - ballSize < paddleWidth && ballY > playerY && ballY < playerY + paddleHeight) {
                ballSpeedX = -ballSpeedX;
            }
            if (ballX + ballSize > canvas.width - paddleWidth && ballY > computerY && ballY < computerY + paddleHeight) {
                ballSpeedX = -ballSpeedX;
            }

            // Controllo del punteggio
            if (ballX - ballSize < 0) {
                computerScore++;
                resetBall();
            }
            if (ballX + ballSize > canvas.width) {
                playerScore++;
                resetBall();
            }
        }

        // Reset della pallina al centro
        function resetBall() {
            ballX = canvas.width / 2;
            ballY = canvas.height / 2;
            ballSpeedX = 6;
            ballSpeedY = 6;
        }

        // Incrementa la velocità della pallina gradualmente
        function increaseBallSpeed() {
            timeElapsed += 1000 / 60; // Aggiorna il tempo trascorso ogni frame (approssimazione)
            if (timeElapsed >= speedIncreaseInterval) {
                ballSpeedX *= speedMultiplier;
                ballSpeedY *= speedMultiplier;
                timeElapsed = 0; // Reset del tempo
            }
        }

        // Disegna tutto
        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawPaddle(0, playerY); // Paddle giocatore
            drawPaddle(canvas.width - paddleWidth, computerY); // Paddle computer
            drawBall(ballX, ballY); // Pallina
            drawScore(); // Punteggio
        }

        // Aggiorna il gioco
        function update() {
            move();
            increaseBallSpeed(); // Aumenta la velocità della pallina gradualmente
            draw();
            requestAnimationFrame(update);
        }

        // Inizia il gioco
        update();
    </script>
</body>
</html>
